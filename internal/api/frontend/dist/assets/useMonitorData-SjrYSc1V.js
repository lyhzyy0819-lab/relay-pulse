import{j as e}from"./index-lyjpRGYG.js";import{u as C,i as pe}from"./i18n-CHCxKNI1.js";import{A as fe,d as ge,T as ae,E as ve,Z as re,S as le,e as ne,f as ie,g as ye,h as je,i as Ne,X as we}from"./icons-DIKtrEYc.js";import{r as v}from"./router-Bv_Qn1wY.js";function Be({stats:t}){const{t:s}=C();return e.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4 border-b border-slate-800/50 pb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1 sm:mb-2",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-amber-500/10 rounded-lg border border-amber-500/20",children:e.jsx(fe,{className:"w-5 h-5 sm:w-6 sm:h-6 text-amber-400"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-400 via-amber-500 to-orange-500",children:"code-cli"})]}),e.jsxs("p",{className:"text-slate-400 text-xs sm:text-sm flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),s("header.tagline")]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex gap-2 sm:gap-4",children:[e.jsxs("div",{className:"px-3 sm:px-4 py-2 rounded-xl bg-slate-900/50 border border-slate-800 backdrop-blur-sm flex items-center gap-2 sm:gap-3 shadow-lg",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-full bg-emerald-500/10 text-emerald-400",children:e.jsx(ge,{size:14,className:"sm:w-4 sm:h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 text-[10px] sm:text-xs",children:s("header.stats.healthy")}),e.jsx("div",{className:"font-mono font-bold text-emerald-400 text-sm sm:text-base",children:t.healthy})]})]}),e.jsxs("div",{className:"px-3 sm:px-4 py-2 rounded-xl bg-slate-900/50 border border-slate-800 backdrop-blur-sm flex items-center gap-2 sm:gap-3 shadow-lg",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-full bg-rose-500/10 text-rose-400",children:e.jsx(ae,{size:14,className:"sm:w-4 sm:h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 text-[10px] sm:text-xs",children:s("header.stats.issues")}),e.jsx("div",{className:"font-mono font-bold text-rose-400 text-sm sm:text-base",children:t.issues})]})]})]})]})}const _e=[{id:"88code",name:"88code",services:["cc","cx"]},{id:"xychatai",name:"xychatai",services:["cx"]},{id:"duckcoding",name:"duckcoding",services:["cc","cx"]},{id:"www.right.codes",name:"www.right.codes",services:["cx"]}],J=[{id:"24h",label:"è¿‘24å°æ—¶",points:24,unit:"hour"},{id:"7d",label:"è¿‘7å¤©",points:7,unit:"day"},{id:"30d",label:"è¿‘30å¤©",points:30,unit:"day"}],ke=t=>[{id:"24h",label:t("controls.timeRanges.24h"),points:24,unit:"hour"},{id:"7d",label:t("controls.timeRanges.7d"),points:7,unit:"day"},{id:"30d",label:t("controls.timeRanges.30d"),points:30,unit:"day"}],H={AVAILABLE:{color:"bg-orange-600",text:"text-orange-400",glow:"shadow-[0_0_10px_rgba(234,88,12,0.6)]",label:"å¯ç”¨",weight:3},DEGRADED:{color:"bg-orange-400",text:"text-orange-300",glow:"shadow-[0_0_10px_rgba(251,146,60,0.6)]",label:"æ³¢åŠ¨",weight:2},MISSING:{color:"bg-slate-400",text:"text-slate-400",glow:"shadow-[0_0_10px_rgba(148,163,184,0.4)]",label:"æ— æ•°æ®",weight:1},UNAVAILABLE:{color:"bg-slate-500",text:"text-slate-400",glow:"shadow-[0_0_10px_rgba(107,114,128,0.6)]",label:"ä¸å¯ç”¨",weight:1}},oe=t=>({AVAILABLE:{color:"bg-orange-600",text:"text-orange-400",glow:"shadow-[0_0_10px_rgba(234,88,12,0.6)]",label:t("status.available"),weight:3},DEGRADED:{color:"bg-orange-400",text:"text-orange-300",glow:"shadow-[0_0_10px_rgba(251,146,60,0.6)]",label:t("status.degraded"),weight:2},MISSING:{color:"bg-slate-400",text:"text-slate-400",glow:"shadow-[0_0_10px_rgba(148,163,184,0.4)]",label:t("status.missing"),weight:1},UNAVAILABLE:{color:"bg-slate-500",text:"text-slate-400",glow:"shadow-[0_0_10px_rgba(107,114,128,0.6)]",label:t("status.unavailable"),weight:1}}),Ae="",F="false".toLowerCase()==="true";function ce({status:t,size:s="md",showLabel:r=!1}){const a={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"},i=H[t];return e.jsx("div",{className:`${a[s]} rounded-full ${i.color} ${i.glow} transition-all duration-500`,role:"img","aria-label":i.label,title:r?void 0:i.label,children:e.jsx("span",{className:"sr-only",children:i.label})})}const T={r:107,g:114,b:128},R={r:251,g:146,b:60},$={r:234,g:88,b:12},M={r:148,g:163,b:184};function z(t,s,r){const a=Math.round(t.r+(s.r-t.r)*r),i=Math.round(t.g+(s.g-t.g)*r),c=Math.round(t.b+(s.b-t.b)*r);return`rgb(${a}, ${i}, ${c})`}function P(t){if(t<0)return`rgb(${M.r}, ${M.g}, ${M.b})`;if(t<60)return`rgb(${T.r}, ${T.g}, ${T.b})`;if(t<80){const r=(t-60)/20;return z(T,R,r)}const s=(t-80)/20;return z(R,$,s)}function Se(t){return{backgroundColor:P(t)}}function q(t,s){if(t<=0||s<=0)return`rgb(${M.r}, ${M.g}, ${M.b})`;const r=t/s;if(r<.3)return`rgb(${$.r}, ${$.g}, ${$.b})`;if(r<1){const a=(r-.3)/.7;return z($,R,a)}if(r<2){const a=(r-1)/1;return z(R,T,a)}return`rgb(${T.r}, ${T.g}, ${T.b})`}const de={mobile:"(max-width: 767px)",tablet:"(max-width: 959px)"};function me(t,s){return t.addEventListener?(t.addEventListener("change",s),()=>t.removeEventListener("change",s)):t.addListener?(t.addListener(s),()=>t.removeListener(s)):(console.warn("matchMedia listeners not supported"),()=>{})}function Y(t,s){const r=window.matchMedia(de[t]);return s(r.matches),me(r,i=>{s(i.matches)})}function ue({point:t,width:s,height:r="h-8",onHover:a,onLeave:i}){const{t:c}=C(),[h,n]=v.useState(!1);v.useEffect(()=>Y("mobile",n),[]);const f=u=>{u.stopPropagation(),a(u,t)};return e.jsx("div",{role:"button",tabIndex:0,className:`${r} rounded-sm transition-all duration-200 hover:scale-110 active:scale-105 hover:z-10 cursor-pointer opacity-80 hover:opacity-100 active:opacity-100`,style:{width:s,...Se(t.availability)},onMouseEnter:h?void 0:u=>a(u,t),onMouseLeave:h?void 0:i,onTouchStart:f,onClick:f,onFocus:h?void 0:u=>a(u,t),onBlur:h?void 0:i,"aria-label":t.availability>=0?c("accessibility.uptimeBlock",{uptime:t.availability.toFixed(1)}):c("accessibility.noDataBlock")})}function Ee(){return typeof window.gtag=="function"&&!!window.GA_MEASUREMENT_ID}function W(t,s){Ee()&&window.gtag("event",t,s)}function K(t,s,r){W("api_request",{endpoint:t,duration:s,success:r})}function Q(t,s,r){W("api_error",{endpoint:t,error_type:s,error_message:r||"Unknown error"})}function G({href:t,children:s,className:r="",trackLabel:a}){if(!t)return e.jsx("span",{className:r,children:s});const i=t.startsWith("http://"),c=()=>{W("click_external_link",{label:a||(typeof s=="string"?s:t),url:t})},h=typeof s=="string"?`è®¿é—® ${s}ï¼ˆåœ¨æ–°çª—å£æ‰“å¼€ï¼‰`:"å¤–éƒ¨é“¾æŽ¥ï¼ˆåœ¨æ–°çª—å£æ‰“å¼€ï¼‰";return e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 hover:underline active:underline min-h-[44px] py-1 -my-1 ${r}`,onClick:c,"aria-label":h,children:[s,e.jsx(ve,{size:12,className:"flex-shrink-0","aria-hidden":"true"}),i&&e.jsx("span",{title:"éžåŠ å¯† HTTP é“¾æŽ¥",className:"inline-flex","aria-label":"è­¦å‘Šï¼šéžåŠ å¯†é“¾æŽ¥",children:e.jsx(ae,{size:12,className:"text-amber-500 flex-shrink-0","aria-hidden":"true"})})]})}let O=null,U=null;function Le(){return typeof window>"u"?!1:(U===null&&(U=window.matchMedia(de.tablet),O=U.matches,me(U,t=>{O=t.matches})),O??!1)}function Te(t,s=50){if(!Le()||t.length<=s)return t;const r=Math.ceil(t.length/s),a=[];for(let i=0;i<t.length;i+=r){const c=t.slice(i,i+r),h=Ie(c);a.push(h)}return a}function Ie(t){if(t.length===0)throw new Error("Cannot aggregate empty group");if(t.length===1)return t[0];const s=t.map(l=>l.availability).filter(l=>l>=0),r=s.length>0?s.reduce((l,g)=>l+g,0)/s.length:-1,a=s.length>0?Math.min(...s):-1,i=s.length>0?Math.max(...s):-1,c={0:4,2:3,1:2,"-1":1},h=t.reduce((l,g)=>{const k=c[String(g.status)]||0,N=c[String(l)]||0;return k>N?g.status:l},t[0].status),n=t.reduce((l,g)=>(g.statusCounts&&Object.keys(g.statusCounts).forEach(k=>{const N=k;l[N]=(l[N]||0)+(g.statusCounts[N]||0)}),l),{}),f=t[0],u=t.map(l=>l.latency).filter(l=>l>0),d=u.length>0?Math.round(u.reduce((l,g)=>l+g,0)/u.length):0,y={index:f.index,status:h,timestamp:f.timestamp,timestampNum:f.timestampNum,latency:d,availability:r,statusCounts:n};return y._aggregated=!0,y._originalPoints=t,y._minAvailability=a,y._maxAvailability=i,y}function Me({item:t,slowLatencyMs:s,showCategoryTag:r=!0,showProvider:a=!0,showSponsor:i=!0,onBlockHover:c,onBlockLeave:h}){const{t:n,i18n:f}=C(),[u,d]=v.useState(!1),y=oe(n),l=v.useMemo(()=>Te(t.history,30),[t.history]);return e.jsxs("div",{className:"bg-slate-800/60 border border-slate-800 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 flex-shrink-0 rounded-lg bg-slate-800 flex items-center justify-center border border-slate-700",children:t.serviceType==="cc"?e.jsx(re,{className:"text-amber-400",size:18}):e.jsx(le,{className:"text-orange-400",size:18})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a&&e.jsx("span",{className:"font-semibold text-slate-100 truncate",children:e.jsx(G,{href:t.providerUrl,children:t.providerName})}),r&&e.jsx("span",{className:`flex-shrink-0 px-1.5 py-0.5 rounded text-[10px] font-semibold uppercase ${t.category==="commercial"?"text-emerald-300 bg-emerald-500/10 border border-emerald-500/30":"text-cyan-300 bg-cyan-500/10 border border-cyan-500/30"}`,children:t.category==="commercial"?n("table.categoryShort.promoted"):n("table.categoryShort.charity")})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-400",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-mono border ${t.serviceType==="cc"?"border-amber-500/30 text-amber-300 bg-amber-500/10":"border-orange-500/30 text-orange-300 bg-orange-500/10"}`,children:t.serviceType.toUpperCase()}),t.channel&&e.jsx("span",{className:"text-slate-500 truncate",children:t.channel})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-slate-800 border border-slate-700",children:[e.jsx(ce,{status:t.currentStatus,size:"sm"}),e.jsx("span",{className:`text-xs font-bold ${y[t.currentStatus].text}`,children:y[t.currentStatus].label})]}),e.jsx("span",{className:"text-sm font-mono font-bold",style:{color:P(t.uptime)},children:t.uptime>=0?`${t.uptime}%`:"--"})]})]}),e.jsx("div",{className:"flex gap-[2px] h-6 w-full",children:l.map((g,k)=>e.jsx(ue,{point:g,width:`${100/l.length}%`,height:"h-full",onHover:c,onLeave:h},k))}),e.jsx("button",{onClick:()=>d(!u),className:"w-full flex items-center justify-center gap-1 py-1.5 text-xs text-slate-500 hover:text-slate-300 transition-colors",children:u?e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:14}),n("table.collapseDetails")]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:14}),n("table.expandDetails")]})}),u&&e.jsxs("div",{className:"pt-3 border-t border-slate-800 space-y-2 text-xs",children:[i&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:n("common.sponsor")}),e.jsx("span",{className:"text-slate-300",children:e.jsx(G,{href:t.sponsorUrl,children:t.sponsor})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:n("common.channel")}),e.jsx("span",{className:"text-slate-300",children:t.channel||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:n("common.lastCheck")}),e.jsx("span",{className:"text-slate-300 font-mono",children:t.lastCheckTimestamp?new Date(t.lastCheckTimestamp*1e3).toLocaleString(f.language,{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]}),t.lastCheckLatency!==void 0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:n("common.latency")}),e.jsxs("span",{className:"font-mono",style:{color:q(t.lastCheckLatency,s)},children:[t.lastCheckLatency,"ms"]})]})]})]})}function Ce({sortConfig:t,onSort:s}){const{t:r}=C(),a=[{key:"providerName",label:r("table.sorting.provider")},{key:"uptime",label:r("table.sorting.uptime")},{key:"currentStatus",label:r("table.sorting.status")},{key:"serviceType",label:r("table.sorting.service")}];return e.jsxs("div",{className:"flex items-center gap-2 mb-4 overflow-x-auto pb-2",children:[e.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:r("controls.sortBy")}),a.map(i=>e.jsxs("button",{onClick:()=>s(i.key),className:`flex items-center gap-1 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-colors flex-shrink-0 ${t.key===i.key?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-slate-800 text-slate-400 border border-slate-700 hover:text-slate-200"}`,children:[i.label,t.key===i.key&&(t.direction==="asc"?e.jsx(ne,{size:12}):e.jsx(ie,{size:12}))]},i.key))]})}function Ve({data:t,sortConfig:s,timeRange:r,slowLatencyMs:a,showCategoryTag:i=!0,showProvider:c=!0,showSponsor:h=!0,onSort:n,onBlockHover:f,onBlockLeave:u}){const{t:d,i18n:y}=C(),[l,g]=v.useState(!1),k=oe(d);v.useEffect(()=>Y("tablet",g),[]);const N=({columnKey:o})=>s.key!==o?e.jsx(Ne,{size:14,className:"opacity-30 ml-1"}):s.direction==="asc"?e.jsx(ne,{size:14,className:"text-amber-400 ml-1"}):e.jsx(ie,{size:14,className:"text-amber-400 ml-1"}),I=ke(d).find(o=>o.id===r);return l?e.jsxs("div",{children:[e.jsx(Ce,{sortConfig:s,onSort:n}),e.jsx("div",{className:"space-y-3",children:t.map(o=>e.jsx(Me,{item:o,slowLatencyMs:a,showCategoryTag:i,showProvider:c,showSponsor:h,onBlockHover:f,onBlockLeave:u},o.id))})]}):e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-800/50 shadow-xl",children:e.jsxs("table",{className:"w-full text-left border-collapse bg-slate-800/40 backdrop-blur-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50 text-slate-400 text-xs uppercase tracking-wider",children:[c&&e.jsx("th",{className:"p-4 font-medium cursor-pointer hover:text-amber-400 transition-colors",onClick:()=>n("providerName"),children:e.jsxs("div",{className:"flex items-center",children:[d("table.headers.provider")," ",e.jsx(N,{columnKey:"providerName"})]})}),h&&e.jsx("th",{className:"p-4 font-medium cursor-pointer hover:text-amber-400 transition-colors",onClick:()=>n("sponsor"),children:e.jsxs("div",{className:"flex items-center",children:[d("table.headers.sponsor")," ",e.jsx(N,{columnKey:"sponsor"})]})}),e.jsx("th",{className:"p-4 font-medium cursor-pointer hover:text-amber-400 transition-colors",onClick:()=>n("serviceType"),children:e.jsxs("div",{className:"flex items-center",children:[d("table.headers.service")," ",e.jsx(N,{columnKey:"serviceType"})]})}),e.jsx("th",{className:"p-4 font-medium cursor-pointer hover:text-amber-400 transition-colors",onClick:()=>n("channel"),children:e.jsxs("div",{className:"flex items-center",children:[d("table.headers.channel")," ",e.jsx(N,{columnKey:"channel"})]})}),e.jsx("th",{className:"p-4 font-medium cursor-pointer hover:text-amber-400 transition-colors",onClick:()=>n("currentStatus"),children:e.jsxs("div",{className:"flex items-center",children:[d("table.headers.status")," ",e.jsx(N,{columnKey:"currentStatus"})]})}),e.jsx("th",{className:"p-4 font-medium cursor-pointer hover:text-amber-400 transition-colors",onClick:()=>n("uptime"),children:e.jsxs("div",{className:"flex items-center",children:[d("table.headers.uptime")," ",e.jsx(N,{columnKey:"uptime"})]})}),e.jsx("th",{className:"p-4 font-medium",children:d("table.headers.lastCheck")}),e.jsx("th",{className:"p-4 font-medium w-1/3 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[d("table.headers.trend"),e.jsx("span",{className:"text-[10px] normal-case opacity-50 border border-slate-700 px-1 rounded",children:I?.label})]})})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/50 text-sm",children:t.map(o=>e.jsxs("tr",{className:"group hover:bg-slate-800/40 transition-[background-color,color]",children:[c&&e.jsx("td",{className:"p-4 font-medium text-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{href:o.providerUrl,children:o.providerName}),i&&e.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-semibold uppercase tracking-wide ${o.category==="commercial"?"text-emerald-300 bg-emerald-500/10 border border-emerald-500/30":"text-cyan-300 bg-cyan-500/10 border border-cyan-500/30"}`,title:o.category==="commercial"?d("table.categoryLabels.promoted"):d("table.categoryLabels.charity"),children:o.category==="commercial"?d("table.categoryShort.promoted"):d("table.categoryShort.charity")})]})}),h&&e.jsx("td",{className:"p-4 text-slate-300 text-sm",children:e.jsx(G,{href:o.sponsorUrl,children:o.sponsor})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-mono border ${o.serviceType==="cc"?"border-amber-500/30 text-amber-300 bg-amber-500/10":"border-orange-500/30 text-orange-300 bg-orange-500/10"}`,children:[o.serviceType==="cc"&&e.jsx(re,{size:10,className:"mr-1"}),o.serviceType==="cx"&&e.jsx(le,{size:10,className:"mr-1"}),o.serviceType.toUpperCase()]})}),e.jsx("td",{className:"p-4 text-slate-400 text-xs",children:o.channel||"-"}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{status:o.currentStatus,size:"sm"}),e.jsx("span",{className:k[o.currentStatus].text,children:k[o.currentStatus].label})]})}),e.jsx("td",{className:"p-4 font-mono font-bold",children:e.jsx("span",{style:{color:P(o.uptime)},children:o.uptime>=0?`${o.uptime}%`:"--"})}),e.jsx("td",{className:"p-4",children:o.lastCheckTimestamp?e.jsxs("div",{className:"text-xs text-slate-400 font-mono flex flex-col gap-0.5",children:[e.jsx("span",{children:new Date(o.lastCheckTimestamp*1e3).toLocaleString(y.language,{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),o.lastCheckLatency!==void 0&&e.jsxs("span",{className:"text-[10px] font-mono",style:{color:q(o.lastCheckLatency,a)},children:[o.lastCheckLatency,"ms"]})]}):e.jsx("span",{className:"text-slate-600 text-xs",children:"-"})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{className:"flex gap-[2px] h-6 w-full max-w-xs",children:o.history.map((E,D)=>e.jsx(ue,{point:E,width:`${100/o.history.length}%`,height:"h-full",onHover:f,onLeave:u},D))})})]},o.id))})]})})}function Fe({tooltip:t,slowLatencyMs:s,onClose:r}){const{t:a,i18n:i}=C(),[c,h]=v.useState(!1);if(v.useEffect(()=>Y("mobile",h),[]),!t.show||!t.data)return null;const n=t.data.statusCounts??{available:0,degraded:0,unavailable:0,slow_latency:0,rate_limit:0,server_error:0,client_error:0,auth_error:0,invalid_request:0,network_error:0,content_mismatch:0},f=[{key:"available",emoji:"ðŸŸ¢",label:a("status.available"),value:n.available},{key:"degraded",emoji:"ðŸŸ¡",label:a("status.degraded"),value:n.degraded},{key:"unavailable",emoji:"ðŸ”´",label:a("status.unavailable"),value:n.unavailable}],u=[{key:"slow_latency",label:a("subStatus.slow_latency"),value:n.slow_latency}].filter(l=>l.value>0),d=[{key:"server_error",label:a("subStatus.server_error"),value:n.server_error},{key:"client_error",label:a("subStatus.client_error"),value:n.client_error},{key:"auth_error",label:a("subStatus.auth_error"),value:n.auth_error},{key:"invalid_request",label:a("subStatus.invalid_request"),value:n.invalid_request},{key:"network_error",label:a("subStatus.network_error"),value:n.network_error},{key:"rate_limit",label:a("subStatus.rate_limit"),value:n.rate_limit},{key:"content_mismatch",label:a("subStatus.content_mismatch"),value:n.content_mismatch}].filter(l=>l.value>0),y=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-slate-400 text-center",children:new Date(t.data.timestampNum*1e3).toLocaleString(i.language)}),t.data.availability>=0&&e.jsxs("div",{className:"font-medium text-center text-sm md:text-xs",style:{color:P(t.data.availability)},children:[a("tooltip.uptime")," ",t.data.availability.toFixed(2),"%"]}),t.data.latency>0&&e.jsxs("div",{className:"text-[10px] text-center",children:[e.jsxs("span",{className:"text-slate-500",children:[a("tooltip.latency")," "]}),e.jsxs("span",{style:{color:q(t.data.latency,s)},children:[t.data.latency,"ms"]})]}),e.jsx("div",{className:"flex flex-col gap-1 pt-2 border-t border-slate-700/50",children:f.map(l=>e.jsxs("div",{className:"flex justify-between items-center gap-3 text-[11px]",children:[e.jsxs("span",{className:"text-slate-300",children:[l.emoji," ",l.label]}),e.jsxs("span",{className:"text-slate-100 font-semibold tabular-nums",children:[l.value," ",a("tooltip.count")]})]},l.key))}),u.length>0&&e.jsxs("div",{className:"flex flex-col gap-1 pt-2 border-t border-slate-700/50",children:[e.jsx("div",{className:"text-[10px] text-slate-400 mb-0.5",children:a("tooltip.degradedTitle")}),u.map(l=>e.jsxs("div",{className:"flex justify-between items-center gap-3 text-[10px] pl-2",children:[e.jsxs("span",{className:"text-slate-400",children:["â€¢ ",l.label]}),e.jsx("span",{className:"text-slate-200 tabular-nums",children:l.value})]},l.key))]}),d.length>0&&e.jsxs("div",{className:"flex flex-col gap-1 pt-2 border-t border-slate-700/50",children:[e.jsx("div",{className:"text-[10px] text-slate-400 mb-0.5",children:a("tooltip.unavailableTitle")}),d.map(l=>e.jsxs("div",{className:"flex justify-between items-center gap-3 text-[10px] pl-2",children:[e.jsxs("span",{className:"text-slate-400",children:["â€¢ ",l.label]}),e.jsx("span",{className:"text-slate-200 tabular-nums",children:l.value})]},l.key))]})]});return c?e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:r,children:[e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-slate-900 border-t border-slate-700 rounded-t-2xl p-4 pb-6 animate-slide-up",onClick:l=>l.stopPropagation(),style:{animation:"slideUp 0.2s ease-out"},children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"w-10 h-1 bg-slate-700 rounded-full"})}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:a("tooltip.title")}),e.jsx("button",{onClick:r,className:"p-1.5 rounded-lg bg-slate-800 text-slate-400 hover:text-slate-200 transition-colors","aria-label":a("common.close"),children:e.jsx(we,{size:16})})]}),e.jsx("div",{className:"flex flex-col gap-2 text-xs",children:e.jsx(y,{})})]}),e.jsx("style",{children:`
          @keyframes slideUp {
            from {
              transform: translateY(100%);
            }
            to {
              transform: translateY(0);
            }
          }
        `})]}):e.jsx("div",{className:"fixed z-50 pointer-events-none transition-opacity duration-200",style:{left:t.x,top:t.y,transform:"translate(-50%, -100%)"},children:e.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md text-slate-200 text-xs p-3 rounded-lg border border-slate-700 shadow-[0_10px_40px_-10px_rgba(0,0,0,0.8)] flex flex-col gap-2 min-w-[180px]",children:[e.jsx(y,{}),e.jsx("div",{className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-slate-900 border-r border-b border-slate-700 transform rotate-45"})]})})}function Ke(){return e.jsx("footer",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:e.jsx("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-slate-400 transition-colors",children:"æ²ªICPå¤‡2025148260å·"})})})}function De(t){return new Promise(s=>{setTimeout(()=>{const r=J.find(c=>c.id===t)||J[0];if(!r){console.error(`Invalid timeRangeId: ${t}, falling back to default`),s([]);return}const a=r.points,i=[];_e.forEach((c,h)=>{c.services.forEach(n=>{const f=Array.from({length:a}).map((b,x)=>{const j=Math.random();let m="AVAILABLE";j>.98?m="MISSING":j>.95?m="UNAVAILABLE":j>.85&&(m="DEGRADED");const A=m==="MISSING"?0:180+Math.floor(Math.random()*220);let w;m==="MISSING"?w=-1:m==="AVAILABLE"?w=80+Math.random()*20:m==="DEGRADED"?w=60+Math.random()*20:w=Math.random()*60;const L=Date.now()-(a-x)*(r.unit==="hour"?36e5:864e5),_={available:m==="AVAILABLE"?1:0,degraded:m==="DEGRADED"?1:0,unavailable:m==="UNAVAILABLE"?1:0,missing:m==="MISSING"?1:0,slow_latency:0,rate_limit:0,server_error:0,client_error:0,auth_error:0,invalid_request:0,network_error:0,content_mismatch:0};if(m==="DEGRADED")Math.random()>.5?_.slow_latency=1:_.rate_limit=1;else if(m==="UNAVAILABLE"){const p=Math.random();p>.75?_.server_error=1:p>.5?_.client_error=1:p>.25?_.network_error=1:_.content_mismatch=1}return{index:x,status:m,timestamp:new Date(L).toISOString(),timestampNum:Math.floor(L/1e3),latency:A,availability:w,statusCounts:_}}),u=f[f.length-1].status,d=f.filter(b=>b.availability>=0),y=d.length>0?parseFloat((d.reduce((b,x)=>b+x.availability,0)/d.length).toFixed(2)):-1,l=["vip-channel","standard-channel","test-channel"],g=l[h%l.length],N=["commercial","public"][h%2],I=["å›¢é˜Ÿè‡ªæœ‰","ç¤¾åŒºèµžåŠ©","duckcodingå®˜æ–¹","ç¤ºä¾‹æ•°æ®"],o=I[h%I.length],E=Math.floor(Date.now()/1e3),D=180+Math.floor(Math.random()*220);i.push({id:`${c.id}-${n}`,providerId:c.id,providerSlug:c.id,providerName:c.name,serviceType:n,category:N,sponsor:o,channel:g,history:f,currentStatus:u,uptime:y,lastCheckTimestamp:E,lastCheckLatency:D})})}),s(i)},600)})}function ee(t){if(!t||t.trim()==="")return null;try{return new URL(t),t}catch{return console.warn(`Invalid URL: ${t}`),null}}function te(t){return t?.trim().toLowerCase()??""}function $e(t){const s=t?.trim();return s?s.charAt(0).toUpperCase()+s.slice(1):pe.t("common.unknownProvider")}const se={1:"AVAILABLE",2:"DEGRADED",0:"UNAVAILABLE",3:"MISSING","-1":"MISSING"},Ue=t=>({available:t?.available??0,degraded:t?.degraded??0,unavailable:t?.unavailable??0,missing:t?.missing??0,slow_latency:t?.slow_latency??0,rate_limit:t?.rate_limit??0,server_error:t?.server_error??0,client_error:t?.client_error??0,auth_error:t?.auth_error??0,invalid_request:t?.invalid_request??0,network_error:t?.network_error??0,content_mismatch:t?.content_mismatch??0});function Oe({timeRange:t,filterService:s,filterProvider:r,filterChannel:a,filterCategory:i,sortConfig:c}){const[h,n]=v.useState(!0),[f,u]=v.useState(null),[d,y]=v.useState([]),[l,g]=v.useState(0),[k,N]=v.useState(5e3);v.useEffect(()=>{let b=!0;return(async()=>{n(!0),u(null);const j=F?0:performance.now();try{let m;if(F)m=await De(t);else{const A=`${Ae}/api/status?period=${t}`,w=await fetch(A),L=Math.round(performance.now()-j);if(!w.ok)throw K("/api/status",L,!1),Q("/api/status",`HTTP_${w.status}`,"HTTP Error"),new Error(`HTTP error! status: ${w.status}`);const _=await w.json();K("/api/status",L,!0),_.meta.slow_latency_ms&&_.meta.slow_latency_ms>0&&N(_.meta.slow_latency_ms),m=_.data.map(p=>{const Z=p.timeline.map((S,V)=>({index:V,status:se[S.status]||"UNAVAILABLE",timestamp:S.time,timestampNum:S.timestamp,latency:S.latency,availability:S.availability,statusCounts:Ue(S.status_counts)})),xe=p.current_status&&se[p.current_status.status]||"UNAVAILABLE",B=Z.filter(S=>S.availability>=0),he=B.length>0?parseFloat((B.reduce((S,V)=>S+V.availability,0)/B.length).toFixed(2)):-1,X=te(p.provider),be=$e(p.provider);return{id:`${X||p.provider}-${p.service}-${p.channel||"default"}`,providerId:X||p.provider,providerSlug:p.provider_slug||te(p.provider),providerName:be,providerUrl:ee(p.provider_url),serviceType:p.service,category:p.category,sponsor:p.sponsor,sponsorUrl:ee(p.sponsor_url),channel:p.channel||void 0,history:Z,currentStatus:xe,uptime:he,lastCheckTimestamp:p.current_status?.timestamp,lastCheckLatency:p.current_status?.latency}})}if(!b)return;y(m)}catch(m){if(!b)return;const A=m instanceof Error?m.message:"Unknown error";if(u(A),!F&&!A.startsWith("HTTP error!")){const w=Math.round(performance.now()-j);K("/api/status",w,!1),Q("/api/status","NETWORK_ERROR","Network failure")}}finally{b&&n(!1)}})(),()=>{b=!1}},[t,l]);const I=v.useMemo(()=>{const b=new Set;return d.forEach(x=>{x.channel&&b.add(x.channel)}),Array.from(b).sort()},[d]),o=v.useMemo(()=>{const b=new Map;return d.forEach(x=>{x.providerId&&(b.has(x.providerId)||b.set(x.providerId,x.providerName))}),Array.from(b.entries()).sort((x,j)=>x[1].localeCompare(j[1],"zh-CN")).map(([x,j])=>({value:x,label:j}))},[d]),E=v.useMemo(()=>{const b=d.filter(x=>i==="all");return c.key&&b.sort((x,j)=>{let m=x[c.key],A=j[c.key];if(c.key==="currentStatus"&&(m=H[x.currentStatus].weight,A=H[j.currentStatus].weight),c.key==="uptime"){const w=L=>L<0?c.direction==="asc"?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:L;m=w(x.uptime),A=w(j.uptime)}return m<A?c.direction==="asc"?-1:1:m>A?c.direction==="asc"?1:-1:0}),b},[d,s,r,a,i,c]),D=v.useMemo(()=>{const b=E.length,x=E.filter(m=>m.currentStatus==="AVAILABLE").length,j=b-x;return{total:b,healthy:x,issues:j}},[E]);return{loading:h,error:f,data:E,stats:D,channels:I,providers:o,slowLatencyMs:k,refetch:()=>{n(!0),g(b=>b+1)}}}export{G as E,Ke as F,ue as H,ce as S,Fe as T,Te as a,oe as b,P as c,Be as d,Ve as e,ke as g,q as l,Oe as u};
