# RelayPulse ç›‘æŽ§é…ç½®ç¤ºä¾‹ï¼ˆå¯ç”¨ä¼ä¸šå¾®ä¿¡å‘Šè­¦ï¼‰

interval: "1m"         # å·¡æ£€é—´éš”
slow_latency: "5s"     # æ…¢è¯·æ±‚é˜ˆå€¼
degraded_weight: 0.7   # é»„è‰²çŠ¶æ€æƒé‡

# ä¼ä¸šå¾®ä¿¡å‘Šè­¦é…ç½®
notifier:
  enabled: true        # å¯ç”¨å‘Šè­¦ï¼ˆé»˜è®¤ falseï¼‰

  # å‘Šè­¦ç­–ç•¥
  continuous_failure_threshold: 3   # è¿žç»­å¤±è´¥å¤šå°‘æ¬¡è§¦å‘"æŒç»­ä¸å¯ç”¨"å‘Šè­¦ï¼ˆé»˜è®¤ 3ï¼‰
  min_notify_interval: "5m"         # æœ€å°å‘Šè­¦é—´éš”ï¼ˆå†·å´æœŸï¼Œé»˜è®¤ 5 åˆ†é’Ÿï¼‰

  # ä¼ä¸šå¾®ä¿¡é…ç½®
  wecom:
    enabled: true
    webhook_url: "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR-WEBHOOK-KEY"
    timeout: "5s"      # HTTP è¶…æ—¶ï¼ˆé»˜è®¤ 5sï¼‰
    retry_count: 2     # å¤±è´¥é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤ 2ï¼‰

    # æ¶ˆæ¯æ¨¡æ¿é…ç½®ï¼ˆå¯é€‰ï¼Œæœªé…ç½®æ—¶ä½¿ç”¨é»˜è®¤æ¨¡æ¿ï¼‰
    # æ”¯æŒ Go text/template è¯­æ³•ï¼Œå¯ç”¨å˜é‡è§æ–‡æ¡£
    # templates:
    #   down:              # æœåŠ¡ä¸å¯ç”¨å‘Šè­¦ï¼ˆç»¿/é»„ â†’ çº¢ï¼‰
    #     title: "âš ï¸ æœåŠ¡ä¸å¯ç”¨å‘Šè­¦"
    #     content: |
    #       > **æœåŠ¡å•†**: {{.Provider}}
    #       > **æœåŠ¡**: {{.Service}}
    #       {{- if .Channel}}
    #       > **é€šé“**: {{.Channel}}
    #       {{- end}}
    #       > **å½“å‰çŠ¶æ€**: {{.StatusEmoji}} {{.StatusName}}
    #       {{- if .SubStatusName}}
    #       > **å¤±è´¥åŽŸå› **: {{.SubStatusName}} (HTTP {{.HTTPStatusHint}})
    #       {{- end}}
    #       > **å‘Šè­¦æ—¶é—´**: {{.Timestamp}}
    #
    #       *æ¥è‡ª RelayPulse ç›‘æŽ§*
    #
    #   up:                # æœåŠ¡æ¢å¤å‘Šè­¦ï¼ˆçº¢ â†’ ç»¿/é»„ï¼‰
    #     title: "âœ… æœåŠ¡æ¢å¤å‘Šè­¦"
    #     content: |
    #       > **æœåŠ¡å•†**: {{.Provider}}
    #       > **æœåŠ¡**: {{.Service}}
    #       {{- if .Channel}}
    #       > **é€šé“**: {{.Channel}}
    #       {{- end}}
    #       > **å½“å‰çŠ¶æ€**: {{.StatusEmoji}} {{.StatusName}}
    #       {{- if gt .Latency 0}}
    #       > **å“åº”å»¶è¿Ÿ**: {{.Latency}} ms
    #       {{- end}}
    #       > **æ¢å¤æ—¶é—´**: {{.Timestamp}}
    #
    #   continuous_down:   # æŒç»­ä¸å¯ç”¨å‘Šè­¦ï¼ˆè¿žç»­å¤±è´¥è¶…è¿‡é˜ˆå€¼ï¼‰
    #     title: "ðŸ”´ æœåŠ¡æŒç»­ä¸å¯ç”¨å‘Šè­¦"
    #     content: |
    #       > **æœåŠ¡å•†**: {{.Provider}}
    #       > **æœåŠ¡**: {{.Service}}
    #       {{- if gt .FailureCount 0}}
    #       > **è¿žç»­å¤±è´¥**: {{.FailureCount}} æ¬¡
    #       {{- end}}
    #       {{- if .SubStatusName}}
    #       > **å¤±è´¥åŽŸå› **: {{.SubStatusName}}
    #       {{- end}}

# ç›‘æŽ§ä»»åŠ¡
monitors:
  - provider: "Code-CLI"
    service: "cc"
    url: "https://api.example.com/v1/chat/completions"
    method: "POST"
    api_key: "sk-xxx"
    category: "commercial"
    sponsor: "æµ‹è¯•ç”¨æˆ·"
    headers:
      Authorization: "Bearer {{API_KEY}}"
    body: |
      {"model": "claude-3-opus", "messages": [{"role": "user", "content": "hi"}]}
    success_contains: "content"
